## æ€è·¯

æœ¬é¢˜å…¶å®ç»™æˆ‘ä»¬æ˜¯ä¸€ä¸ªæœ‰å‘å›¾ï¼Œ æ„è¯†åˆ°è¿™æ˜¯æœ‰å‘å›¾å¾ˆé‡è¦ï¼

å›¾ä¸­ç»™æˆ‘çš„ä¸¤ä¸ªç¤ºä¾‹ï¼š `[[1],[2],[3],[]]` `[[1,3],[3,0,1],[2],[0]]`ï¼Œç”»æˆå¯¹åº”çš„å›¾å¦‚ä¸‹ï¼š

![image.png](https://pic.leetcode-cn.com/1658111239-NWmRKe-image.png)

æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå›¾1çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯é“¾æ¥çš„ï¼Œè€Œå›¾äºŒä¸­ï¼ŒèŠ‚ç‚¹2 æ˜¯å­¤ç«‹çš„ã€‚

è¿™å°±å¾ˆå®¹æ˜“è®©æˆ‘ä»¬æƒ³èµ·å²›å±¿é—®é¢˜ï¼Œåªè¦å‘ç°ç‹¬ç«‹çš„å²›ï¼Œå°±æ˜¯ä¸èƒ½è¿›å…¥æ‰€æœ‰æˆ¿é—´ã€‚

æ­¤æ—¶ä¹Ÿå®¹æ˜“æƒ³åˆ°ç”¨å¹¶æŸ¥é›†çš„æ–¹å¼å»è§£å†³ã€‚

**ä½†æœ¬é¢˜æ˜¯æœ‰å‘å›¾**ï¼Œåœ¨æœ‰å‘å›¾ä¸­ï¼Œå³ä½¿æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯é“¾æ¥çš„ï¼Œä½†ä¾ç„¶ä¸å¯èƒ½ä»0å‡ºå‘éå†æ‰€æœ‰è¾¹ã€‚
ç»™å¤§å®¶ä¸¾ä¸€ä¸ªä¾‹å­ï¼š

å›¾3ï¼š[[5], [], [1, 3], [5]] ï¼Œå¦‚å›¾ï¼š

![image.png](https://pic.leetcode-cn.com/1658111255-OOAKuz-image.png)

åœ¨å›¾3ä¸­ï¼Œå¤§å®¶å¯ä»¥å‘ç°ï¼ŒèŠ‚ç‚¹0åªèƒ½åˆ°èŠ‚ç‚¹5ï¼Œç„¶åå°±å“ªä¹Ÿå»ä¸äº†äº†ã€‚

æ‰€ä»¥æœ¬é¢˜æ˜¯ä¸€ä¸ªæœ‰å‘å›¾æœç´¢å…¨è·¯å¾„çš„é—®é¢˜ã€‚ åªèƒ½ç”¨æ·±æœï¼ˆDFSï¼‰æˆ–è€…å¹¿æœï¼ˆBFSï¼‰æ¥æœã€‚

å…³äºDFSçš„ç†è®ºï¼Œå¦‚æœå¤§å®¶æœ‰å›°æƒ‘ï¼Œå¯ä»¥å…ˆçœ‹æˆ‘è¿™ç¯‡é¢˜è§£ï¼š [DFSç†è®ºåŸºç¡€](https://leetcode.cn/problems/all-paths-from-source-to-target/solution/by-carlsun-2-66pf)

**ä»¥ä¸‹dfsåˆ†æ å¤§å®¶ä¸€å®šè¦ä»”ç»†çœ‹ï¼Œæœ¬é¢˜æœ‰ä¸¤ç§dfsçš„è§£æ³•ï¼Œå¾ˆå¤šé¢˜è§£æ²¡æœ‰è®²æ¸…æ¥š**ã€‚ çœ‹å®Œä¹‹å ç›¸ä¿¡ä½ å¯¹dfsä¼šæœ‰æ›´æ·±çš„ç†è§£ã€‚

æ·±æœä¸‰éƒ¨æ›²ï¼š

1. ç¡®è®¤é€’å½’å‡½æ•°ï¼Œå‚æ•°

éœ€è¦ä¼ å…¥äºŒç»´æ•°ç»„roomsæ¥éå†åœ°å›¾ï¼Œéœ€è¦çŸ¥é“å½“å‰æˆ‘ä»¬æ‹¿åˆ°çš„keyï¼Œä»¥è‡³äºå»ä¸‹ä¸€ä¸ªæˆ¿é—´ã€‚

åŒæ—¶è¿˜éœ€è¦ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥è®°å½•æˆ‘ä»¬éƒ½èµ°è¿‡äº†å“ªäº›æˆ¿é—´ï¼Œè¿™æ ·å¥½çŸ¥é“æœ€åæœ‰æ²¡æœ‰æŠŠæ‰€æœ‰æˆ¿é—´éƒ½éå†çš„ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªä¸€ç»´æ•°ç»„ã€‚

æ‰€ä»¥ é€’å½’å‡½æ•°å‚æ•°å¦‚ä¸‹ï¼š

* C++

```C++
// key å½“å‰å¾—åˆ°çš„å¯ä»¥ 
// visited è®°å½•è®¿é—®è¿‡çš„æˆ¿é—´ 
void dfs(const vector<vector<int>>& rooms, int key, vector<bool>& visited) {
```

2. ç¡®è®¤ç»ˆæ­¢æ¡ä»¶

éå†çš„æ—¶å€™ï¼Œä»€ä¹ˆæ—¶å€™ç»ˆæ­¢å‘¢ï¼Ÿ

è¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„é€»è¾‘ï¼Œå°±æ˜¯åœ¨é€’å½’ä¸­ï¼Œ**æˆ‘ä»¬æ˜¯å¤„ç†å½“å‰è®¿é—®çš„èŠ‚ç‚¹ï¼Œè¿˜æ˜¯å¤„ç†ä¸‹ä¸€ä¸ªè¦è®¿é—®çš„èŠ‚ç‚¹**ã€‚

è¿™å†³å®š ç»ˆæ­¢æ¡ä»¶æ€ä¹ˆå†™ã€‚

é¦–å…ˆæ˜ç¡®ï¼Œæœ¬é¢˜ä¸­ä»€ä¹ˆå«åšå¤„ç†ï¼Œå°±æ˜¯ visitedæ•°ç»„æ¥è®°å½•è®¿é—®è¿‡çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæŠŠè¯¥èŠ‚ç‚¹é»˜è®¤ æ•°ç»„é‡Œå…ƒç´ éƒ½æ˜¯falseï¼ŒæŠŠå…ƒç´ æ ‡è®°ä¸ºtrueå°±æ˜¯å¤„ç† æœ¬èŠ‚ç‚¹äº†ã€‚

å¦‚æœæˆ‘ä»¬æ˜¯å¤„ç†å½“å‰è®¿é—®çš„èŠ‚ç‚¹ï¼Œå½“å‰è®¿é—®çš„èŠ‚ç‚¹å¦‚æœæ˜¯ true ï¼Œè¯´æ˜æ˜¯è®¿é—®è¿‡çš„èŠ‚ç‚¹ï¼Œé‚£å°±ç»ˆæ­¢æœ¬å±‚é€’å½’ï¼Œå¦‚æœä¸æ˜¯trueï¼Œæˆ‘ä»¬å°±æŠŠå®ƒèµ‹å€¼ä¸ºtrueï¼Œå› ä¸ºæˆ‘ä»¬å¤„ç†æœ¬å±‚é€’å½’çš„èŠ‚ç‚¹ã€‚

ä»£ç å°±æ˜¯è¿™æ ·ï¼š

* C++

```C++
// å†™æ³•ä¸€ï¼šå¤„ç†å½“å‰è®¿é—®çš„èŠ‚ç‚¹
void dfs(const vector<vector<int>>& rooms, int key, vector<bool>& visited) {
    if (visited[key]) { // æœ¬å±‚é€’å½’æ˜¯trueï¼Œè¯´æ˜è®¿é—®è¿‡ï¼Œç«‹åˆ»è¿”å›
        return;
    }
    visited[key] = true; // ç»™å½“å‰éå†çš„èŠ‚ç‚¹èµ‹å€¼true 
    vector<int> keys = rooms[key];
    for (int key : keys) {
        // æ·±åº¦ä¼˜å…ˆæœç´¢éå†
        dfs(rooms, key, visited);
    }
}
```

å¦‚æœæˆ‘ä»¬æ˜¯å¤„ç†ä¸‹ä¸€å±‚è®¿é—®çš„èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯å½“å‰å±‚ã€‚é‚£ä¹ˆå°±è¦åœ¨ æ·±æœä¸‰éƒ¨æ›²ä¸­ç¬¬ä¸‰æ­¥ï¼šå¤„ç†ç›®å‰æœç´¢èŠ‚ç‚¹å‡ºå‘çš„è·¯å¾„ çš„æ—¶å€™å¯¹ èŠ‚ç‚¹è¿›è¡Œå¤„ç†ã€‚

è¿™æ ·çš„è¯ï¼Œå°±ä¸éœ€è¦ç»ˆæ­¢æ¡ä»¶ï¼Œè€Œæ˜¯åœ¨ æœç´¢ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œç›´æ¥åˆ¤æ–­ ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯æˆ‘ä»¬è¦æœçš„èŠ‚ç‚¹ã€‚

ä»£ç å°±æ˜¯è¿™æ ·çš„ï¼š

* C++

```C++
// å†™æ³•äºŒï¼šå¤„ç†ä¸‹ä¸€ä¸ªè¦è®¿é—®çš„èŠ‚ç‚¹
void dfs(const vector<vector<int>>& rooms, int key, vector<bool>& visited) {
    // è¿™é‡Œ æ²¡æœ‰ç»ˆæ­¢æ¡ä»¶ï¼Œè€Œæ˜¯åœ¨ å¤„ç†ä¸‹ä¸€å±‚èŠ‚ç‚¹çš„æ—¶å€™æ¥åˆ¤æ–­
    vector<int> keys = rooms[key];
    for (int key : keys) { 
        if (visited[key] == false) { // å¤„ç†ä¸‹ä¸€å±‚èŠ‚ç‚¹ï¼Œåˆ¤æ–­æ˜¯å¦è¦è¿›è¡Œé€’å½’
            visited[key] = true;
            dfs(rooms, key, visited);
        }       
    }
}
```

å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœçœ‹å¾… æˆ‘ä»¬è¦è®¿é—®çš„èŠ‚ç‚¹ï¼Œç›´æ¥å†³å®šäº†ä¸¤ç§ä¸ä¸€æ ·çš„å†™æ³•ï¼Œå¾ˆå¤šåŒå­¦å¯¹è¿™ä¸€å—å¾ˆæ¨¡ç³Šï¼Œå…¶å®åšè¿‡è¿™é“é¢˜ï¼Œä¹Ÿæ²¡æœ‰æ€è€ƒåˆ°è¿™ä¸ªç»´åº¦ä¸Šã€‚

3. å¤„ç†ç›®å‰æœç´¢èŠ‚ç‚¹å‡ºå‘çš„è·¯å¾„

å…¶å®åœ¨ä¸Šé¢ï¼Œæ·±æœä¸‰éƒ¨æ›² ç¬¬äºŒéƒ¨ï¼Œå°±å·²ç»è®²äº†ï¼Œå› ä¸ºç»ˆæ­¢æ¡ä»¶çš„ä¸¤ç§å†™æ³•ï¼Œ ç›´æ¥å†³å®šäº†ä¸¤ç§ä¸ä¸€æ ·çš„é€’å½’å†™æ³•ã€‚

è¿™é‡Œè¿˜æœ‰ç»†èŠ‚ï¼š

çœ‹ä¸Šé¢ä¸¤ä¸ªç‰ˆæœ¬çš„å†™æ³•ä¸­ï¼Œ å¥½åƒæ²¡æœ‰å‘ç°å›æº¯çš„é€»è¾‘ã€‚

æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæœ‰é€’å½’å°±æœ‰å›æº¯ï¼Œå›æº¯å°±åœ¨é€’å½’å‡½æ•°çš„ä¸‹é¢ï¼Œ é‚£ä¹ˆä¹‹å‰æˆ‘ä»¬åšçš„dfsé¢˜ç›®ï¼Œéƒ½éœ€è¦å›æº¯æ“ä½œï¼Œä¾‹å¦‚ï¼š[797.æ‰€æœ‰å¯èƒ½çš„è·¯å¾„](https://leetcode.cn/problems/all-paths-from-source-to-target/solution/by-carlsun-2-66pf/)ï¼Œ **ä¸ºä»€ä¹ˆæœ¬é¢˜å°±æ²¡æœ‰å›æº¯å‘¢ï¼Ÿ**

ä»£ç ä¸­å¯ä»¥çœ‹åˆ°dfså‡½æ•°ä¸‹é¢å¹¶æ²¡æœ‰å›æº¯çš„æ“ä½œã€‚

æ­¤æ—¶å°±è¦åœ¨æ€è€ƒæœ¬é¢˜çš„è¦æ±‚äº†ï¼Œæœ¬é¢˜æ˜¯éœ€è¦åˆ¤æ–­ 0èŠ‚ç‚¹æ˜¯å¦èƒ½åˆ°æ‰€æœ‰èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ²¡æœ‰å¿…è¦å›æº¯å»æ’¤é”€æ“ä½œäº†ï¼Œåªè¦éå†è¿‡çš„èŠ‚ç‚¹ä¸€å¾‹éƒ½æ ‡è®°ä¸Šã€‚

**é‚£ä»€ä¹ˆæ—¶å€™éœ€è¦å›æº¯æ“ä½œå‘¢ï¼Ÿ**

å½“æˆ‘ä»¬éœ€è¦æœç´¢ä¸€æ¡å¯è¡Œè·¯å¾„çš„æ—¶å€™ï¼Œå°±éœ€è¦å›æº¯æ“ä½œäº†ï¼Œå› ä¸ºæ²¡æœ‰å›æº¯ï¼Œå°±æ²¡æ³•â€œè°ƒå¤´â€ï¼Œ å¦‚æœä¸ç†è§£çš„è¯ï¼Œå»çœ‹æˆ‘å†™çš„  [797.æ‰€æœ‰å¯èƒ½çš„è·¯å¾„](https://leetcode.cn/problems/all-paths-from-source-to-target/solution/by-carlsun-2-66pf/) çš„é¢˜è§£ã€‚

ä»¥ä¸Šåˆ†æå®Œæ¯•ï¼ŒDFSæ•´ä½“å®ç°C++ä»£ç å¦‚ä¸‹ï¼š

* CPP

```CPP
// å†™æ³•ä¸€ï¼šå¤„ç†å½“å‰è®¿é—®çš„èŠ‚ç‚¹
class Solution {
private:
    void dfs(const vector<vector<int>>& rooms, int key, vector<bool>& visited) {
        if (visited[key]) {
            return;
        }
        visited[key] = true;
        vector<int> keys = rooms[key];
        for (int key : keys) {
            // æ·±åº¦ä¼˜å…ˆæœç´¢éå†
            dfs(rooms, key, visited);
        }
    }
public:
    bool canVisitAllRooms(vector<vector<int>>& rooms) {
        vector<bool> visited(rooms.size(), false);
        dfs(rooms, 0, visited);
        //æ£€æŸ¥æ˜¯å¦éƒ½è®¿é—®åˆ°äº†
        for (int i : visited) {
            if (i == false) return false;
        }
        return true;
    }
};

```

* c++

```c++
å†™æ³•äºŒï¼šå¤„ç†ä¸‹ä¸€ä¸ªè¦è®¿é—®çš„èŠ‚ç‚¹
class Solution {
private:  
    void dfs(const vector<vector<int>>& rooms, int key, vector<bool>& visited) {
        vector<int> keys = rooms[key];
        for (int key : keys) { 
            if (visited[key] == false) {
                visited[key] = true;
                dfs(rooms, key, visited);
            }       
        }
    }
public:
    bool canVisitAllRooms(vector<vector<int>>& rooms) {
        vector<bool> visited(rooms.size(), false); 
        visited[0] = true; // 0 èŠ‚ç‚¹æ˜¯å‡ºå‘èŠ‚ç‚¹ï¼Œä¸€å®šè¢«è®¿é—®è¿‡
        dfs(rooms, 0, visited);  
        //æ£€æŸ¥æ˜¯å¦éƒ½è®¿é—®åˆ°äº†
        for (int i : visited) {
            if (i == false) return false;
        }
        return true;
    }
};

```

æœ¬é¢˜æˆ‘ä¹Ÿç»™å‡º BFS C++ä»£ç ï¼Œè‡³äºBFSï¼Œæˆ‘åé¢ä¼šæœ‰å•ç‹¬æ–‡ç« æ¥è®²ï¼Œä»£ç å¦‚ä¸‹ï¼š

* CPP

```CPP
class Solution {
bool bfs(const vector<vector<int>>& rooms) {
    vector<int> visited(rooms.size(), 0); // æ ‡è®°æˆ¿é—´æ˜¯å¦è¢«è®¿é—®è¿‡
    visited[0] = 1; //  0 å·æˆ¿é—´å¼€å§‹
    queue<int> que;
    que.push(0); //  0 å·æˆ¿é—´å¼€å§‹

    // å¹¿åº¦ä¼˜å…ˆæœç´¢çš„è¿‡ç¨‹
    while (!que.empty()) {
        int key = que.front(); que.pop();
         vector<int> keys = rooms[key];
         for (int key : keys) {
             if (!visited[key]) {
                 que.push(key);
                 visited[key] = 1;
             }
         }
    }
    // æ£€æŸ¥æˆ¿é—´æ˜¯ä¸æ˜¯éƒ½éå†è¿‡äº†
    for (int i : visited) {
        if (i == 0) return false;
    }
    return true;

}
public:
    bool canVisitAllRooms(vector<vector<int>>& rooms) {
        return bfs(rooms);
    }
};
```

## å…¶ä»–è¯­è¨€ç‰ˆæœ¬

* []

```java
class Solution {
     private void dfs(int key, List<List<Integer>>  rooms, List<Boolean> visited) {
        if (visited.get(key)) {
            return;
        }
        visited.set(key, true);
        for (int k : rooms.get(key)) {
            // æ·±åº¦ä¼˜å…ˆæœç´¢éå†
            dfs(k, rooms, visited);
        }
    }
    public boolean canVisitAllRooms(List<List<Integer>> rooms) {
        List<Boolean> visited = new ArrayList<Boolean>(){{
            for(int i = 0 ; i < rooms.size(); i++){
                add(false);
            }
        }};
        dfs(0, rooms, visited);
        //æ£€æŸ¥æ˜¯å¦éƒ½è®¿é—®åˆ°äº†
        for (boolean flag : visited) {
            if (!flag) {
                return false;
            }
        }
        return true;
    }
}
```

* []

```python

class Solution:
    def dfs(self, key: int, rooms: List[List[int]]  , visited : List[bool] ) :
        if visited[key] :
            return
        visited[key] = True
        keys = rooms[key]
        for i in range(len(keys)) :
            # æ·±åº¦ä¼˜å…ˆæœç´¢éå†
            self.dfs(keys[i], rooms, visited)

    def canVisitAllRooms(self, rooms: List[List[int]]) -> bool:
        visited = [False for i in range(len(rooms))]

        self.dfs(0, rooms, visited)

        # æ£€æŸ¥æ˜¯å¦éƒ½è®¿é—®åˆ°äº†
        for i in range(len(visited)):
            if not visited[i] :
                return False
        return True

```

* []

```go

func dfs(key int, rooms [][]int, visited []bool ) {
	if visited[key] {
		return;
	}

	visited[key] = true
	keys := rooms[key]
	for _ , key := range keys {
		// æ·±åº¦ä¼˜å…ˆæœç´¢éå†
		dfs(key, rooms, visited);
	}
}

func canVisitAllRooms(rooms [][]int) bool {
	visited := make([]bool, len(rooms));
	dfs(0, rooms, visited);
	//æ£€æŸ¥æ˜¯å¦éƒ½è®¿é—®åˆ°äº†
	for i := 0; i < len(visited); i++ {
		if !visited[i] {
			return false;
		}
	}
	return true;
}
```

* []

```javascript
//DFS
var canVisitAllRooms = function(rooms) {
    const dfs = (key, rooms, visited) => {
        if(visited[key]) return;
        visited[key] = 1;
        for(let k of rooms[key]){
            // æ·±åº¦ä¼˜å…ˆæœç´¢éå†
            dfs(k, rooms, visited);
        }
    }
    const visited = new Array(rooms.length).fill(false);
    dfs(0, rooms, visited);
    //æ£€æŸ¥æ˜¯å¦éƒ½è®¿é—®åˆ°äº†
    for (let i of visited) {
        if (!i) {
            return false;
        }
    }
    return true;
};

//BFS
var canVisitAllRooms = function(rooms) {
    const bfs = rooms => {
        const visited = new Array(rooms.length).fill(0); // æ ‡è®°æˆ¿é—´æ˜¯å¦è¢«è®¿é—®è¿‡
        visited[0] = 1; // 0 å·æˆ¿é—´å¼€å§‹
        const queue = []; //jsæ•°ç»„ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨
        queue.push(0); //  0 å·æˆ¿é—´å¼€å§‹
        // å¹¿åº¦ä¼˜å…ˆæœç´¢çš„è¿‡ç¨‹
        while(queue.length !== 0){
            let key = queue[0];
            queue.shift();
            for(let k of rooms[key]){
                if(!visited[k]){
                    queue.push(k);
                    visited[k] = 1;
                }
            }
        }
        // æ£€æŸ¥æˆ¿é—´æ˜¯ä¸æ˜¯éƒ½éå†è¿‡äº†
        for(let i of visited){
            if(i === 0) return false;
        }
        return true;
    }
    return bfs(rooms);
};
```

-----------

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜Carlï¼Œå¦‚æœä½ è¿˜åœ¨æ²¡æœ‰ç« æ³•çš„åˆ·é¢˜ï¼Œ**å»ºè®®æŒ‰ç…§[ä»£ç éšæƒ³å½•åˆ·é¢˜è·¯çº¿](https://programmercarl.com/)æ¥åˆ·**ï¼Œå¹¶æä¾›[PDFä¸‹è½½](https://programmercarl.com/other/algo_pdf.html)ï¼Œåˆ·é¢˜è·¯çº¿åŒæ—¶ä¹Ÿå¼€æºåœ¨[Github](https://github.com/youngyangyang04/leetcode-master)ä¸Šï¼Œä½ ä¼šå‘ç°è¯¦è§å¾ˆæ™šï¼

**å¦‚æœæ„Ÿè§‰é¢˜è§£å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸è¦åå•¬ç»™ä¸€ä¸ªğŸ‘å§ï¼**

