### æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ

æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸€ä¸ªé•¿åº¦ä¸º $2$ çš„å›æ–‡å­—ç¬¦ä¸²ï¼Œå…¶ç›¸é‚»ä¸¤ä¸ªå­—ç¬¦ä¸€å®šç›¸åŒï¼›è€Œä¸€ä¸ªé•¿åº¦ä¸º $3$ çš„å›æ–‡å­—ç¬¦ä¸²ï¼Œå…¶é¦–å°¾ä¸¤ä¸ªå­—ç¬¦ä¸€å®šç›¸åŒã€‚å› æ­¤ï¼Œä¸€ä¸ªç¾ä¸½å­—ç¬¦ä¸²ä¸åŒ…å«ä»»ä½•é•¿åº¦ä¸º $2$ æˆ–æ›´é•¿çš„å›æ–‡å­å­—ç¬¦ä¸²ï¼Œæ„å‘³ç€è¯¥å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ä¸å…¶ç›¸é‚»çš„å‰ä¸¤ä¸ªå­—ç¬¦éƒ½ä¸ç›¸åŒã€‚

æˆ‘ä»¬å¯ä»¥è´ªå¿ƒåœ°ä»å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªä¸‹æ ‡å¼€å§‹å¾€å‰æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ä¸€ä¸ªä¸‹æ ‡ $i$ï¼Œä½¿å¾—ä¸‹æ ‡ $i$ å¤„çš„å­—ç¬¦å¯ä»¥è¢«æ›¿æ¢ä¸ºä¸€ä¸ªæ¯”å…¶ç¨å¤§çš„å­—ç¬¦ï¼ŒåŒæ—¶ä¿è¯å…¶ä¸å…¶ç›¸é‚»çš„å‰ä¸¤ä¸ªå­—ç¬¦éƒ½ä¸ç›¸åŒçš„å­—ç¬¦ $c$ã€‚

- è‹¥æ‰¾åˆ°äº†è¿™æ ·çš„ä¸‹æ ‡ $i$ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°† $s[i]$ æ›¿æ¢ä¸º $c$ï¼Œå¹¶å°† $s[i+1]$ åˆ° $s[n-1]$ çš„å­—ç¬¦ä¾æ¬¡æ›¿æ¢ä¸ºå­—å…¸åºå°½å¯èƒ½å°çš„ã€ä¸ä¸å‰é¢ç›¸é‚»ä¸¤ä¸ªå­—ç¬¦ç›¸åŒçš„ã€ä¸”åœ¨å­—æ¯è¡¨å‰ $k$ ä¸ªå­—ç¬¦ä¸­çš„å­—ç¬¦ï¼Œæ›¿æ¢å®Œæˆåï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªå­—å…¸åºæœ€å°çš„ä¸”å¤§äº $s$ çš„ç¾ä¸½å­—ç¬¦ä¸²ã€‚
- è‹¥æ‰¾ä¸åˆ°è¿™æ ·çš„ä¸‹æ ‡ $i$ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ— æ³•æ„é€ å‡ºå­—å…¸åºå¤§äº $s$ çš„ç¾ä¸½å­—ç¬¦ä¸²ï¼Œå› æ­¤è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚

* [sol1-Python3]

```python
class Solution:
    def smallestBeautifulString(self, s: str, k: int) -> str:
        n = len(s)
        cs = list(s)
        for i in range(n - 1, -1, -1):
            p = ord(cs[i]) - ord('a') + 1
            for j in range(p, k):
                c = chr(ord('a') + j)
                if (i > 0 and cs[i - 1] == c) or (i > 1 and cs[i - 2] == c):
                    continue
                cs[i] = c
                for l in range(i + 1, n):
                    for m in range(k):
                        c = chr(ord('a') + m)
                        if (l > 0 and cs[l - 1] == c) or (l > 1 and cs[l - 2] == c):
                            continue
                        cs[l] = c
                        break
                return ''.join(cs)
        return ''
```

* [sol1-Java]

```java
class Solution {
    public String smallestBeautifulString(String s, int k) {
        int n = s.length();
        char[] cs = s.toCharArray();
        for (int i = n - 1; i >= 0; --i) {
            int p = cs[i] - 'a' + 1;
            for (int j = p; j < k; ++j) {
                char c = (char) ('a' + j);
                if ((i > 0 && cs[i - 1] == c) || (i > 1 && cs[i - 2] == c)) {
                    continue;
                }
                cs[i] = c;
                for (int l = i + 1; l < n; ++l) {
                    for (int m = 0; m < k; ++m) {
                        c = (char) ('a' + m);
                        if ((l > 0 && cs[l - 1] == c) || (l > 1 && cs[l - 2] == c)) {
                            continue;
                        }
                        cs[l] = c;
                        break;
                    }
                }
                return String.valueOf(cs);
            }
        }
        return "";
    }
}
```

* [sol1-C++]

```cpp
class Solution {
public:
    string smallestBeautifulString(string s, int k) {
        int n = s.size();
        for (int i = n - 1; i >= 0; --i) {
            int p = s[i] - 'a' + 1;
            for (int j = p; j < k; ++j) {
                char c = (char) ('a' + j);
                if ((i > 0 && s[i - 1] == c) || (i > 1 && s[i - 2] == c)) {
                    continue;
                }
                s[i] = c;
                for (int l = i + 1; l < n; ++l) {
                    for (int m = 0; m < k; ++m) {
                        c = (char) ('a' + m);
                        if ((l > 0 && s[l - 1] == c) || (l > 1 && s[l - 2] == c)) {
                            continue;
                        }
                        s[l] = c;
                        break;
                    }
                }
                return s;
            }
        }
        return "";
    }
};
```

* [sol1-Go]

```go
func smallestBeautifulString(s string, k int) string {
	cs := []byte(s)
	n := len(cs)
	for i := n - 1; i >= 0; i-- {
		p := int(cs[i] - 'a' + 1)
		for j := p; j < k; j++ {
			c := byte('a' + j)
			if (i > 0 && cs[i-1] == c) || (i > 1 && cs[i-2] == c) {
				continue
			}
			cs[i] = c
			for l := i + 1; l < n; l++ {
				for m := 0; m < k; m++ {
					c = byte('a' + m)
					if (l > 0 && cs[l-1] == c) || (l > 1 && cs[l-2] == c) {
						continue
					}
					cs[l] = c
					break
				}
			}
			return string(cs)
		}
	}
	return ""
}
```

* [sol1-TypeScript]

```ts
function smallestBeautifulString(s: string, k: number): string {
    const cs: string[] = s.split('');
    const n = cs.length;
    for (let i = n - 1; i >= 0; --i) {
        const p = cs[i].charCodeAt(0) - 97 + 1;
        for (let j = p; j < k; ++j) {
            let c = String.fromCharCode(j + 97);
            if ((i > 0 && cs[i - 1] === c) || (i > 1 && cs[i - 2] === c)) {
                continue;
            }
            cs[i] = c;
            for (let l = i + 1; l < n; ++l) {
                for (let m = 0; m < k; ++m) {
                    c = String.fromCharCode(m + 97);
                    if ((l > 0 && cs[l - 1] === c) || (l > 1 && cs[l - 2] === c)) {
                        continue;
                    }
                    cs[l] = c;
                    break;
                }
            }
            return cs.join('');
        }
    }
    return '';
}
```

æ—¶é—´å¤æ‚åº¦ $O(n)$ï¼Œå…¶ä¸­ $n$ æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å¿½ç•¥ç­”æ¡ˆçš„ç©ºé—´æ¶ˆè€—ï¼Œç©ºé—´å¤æ‚åº¦ $O(1)$ã€‚

---

æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºåŒºäº¤æµï¼Œæ¬¢è¿è¯„è®ºåŒºæä¾›å…¶å®ƒè§£é¢˜æ€è·¯ï¼ˆä»£ç ï¼‰ï¼Œä¹Ÿå¯ä»¥ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ä½œè€…å“ˆğŸ˜„~
