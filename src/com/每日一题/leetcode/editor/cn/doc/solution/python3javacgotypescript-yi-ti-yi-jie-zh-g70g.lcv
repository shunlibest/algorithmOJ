### æ–¹æ³•ä¸€ï¼šç›´æ¥éå†

æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º $m \times n$ çš„äºŒç»´æ•°ç»„ $\textit{ans}$ï¼Œå…¶ä¸­ $\textit{ans}[i][j]$ è¡¨ç¤ºå›¾åƒä¸­ç¬¬ $i$ è¡Œç¬¬ $j$ åˆ—çš„å•å…ƒæ ¼çš„å¹³æ»‘å€¼ã€‚

å¯¹äº $\textit{ans}[i][j]$ï¼Œæˆ‘ä»¬éå† $\textit{img}$ ä¸­ç¬¬ $i$ è¡Œç¬¬ $j$ åˆ—çš„å•å…ƒæ ¼åŠå…¶å‘¨å›´çš„ $8$ ä¸ªå•å…ƒæ ¼ï¼Œè®¡ç®—å®ƒä»¬çš„å’Œ $s$ ä»¥åŠä¸ªæ•° $cnt$ï¼Œç„¶åè®¡ç®—å¹³å‡å€¼ $s / cnt$ å¹¶å°†å…¶å­˜å…¥ $\textit{ans}[i][j]$ ä¸­ã€‚

éå†ç»“æŸåï¼Œæˆ‘ä»¬è¿”å› $\textit{ans}$ å³å¯ã€‚

* [sol1-Python3]

```python
class Solution:
    def imageSmoother(self, img: List[List[int]]) -> List[List[int]]:
        m, n = len(img), len(img[0])
        ans = [[0] * n for _ in range(m)]
        for i in range(m):
            for j in range(n):
                s = cnt = 0
                for x in range(i - 1, i + 2):
                    for y in range(j - 1, j + 2):
                        if 0 <= x < m and 0 <= y < n:
                            cnt += 1
                            s += img[x][y]
                ans[i][j] = s // cnt
        return ans
```

* [sol1-Java]

```java
class Solution {
    public int[][] imageSmoother(int[][] img) {
        int m = img.length;
        int n = img[0].length;
        int[][] ans = new int[m][n];
        for (int i = 0; i < m; ++i) {
            for (int j = 0; j < n; ++j) {
                int s = 0;
                int cnt = 0;
                for (int x = i - 1; x <= i + 1; ++x) {
                    for (int y = j - 1; y <= j + 1; ++y) {
                        if (x >= 0 && x < m && y >= 0 && y < n) {
                            ++cnt;
                            s += img[x][y];
                        }
                    }
                }
                ans[i][j] = s / cnt;
            }
        }
        return ans;
    }
}
```

* [sol1-C++]

```cpp
class Solution {
public:
    vector<vector<int>> imageSmoother(vector<vector<int>>& img) {
        int m = img.size(), n = img[0].size();
        vector<vector<int>> ans(m, vector<int>(n));
        for (int i = 0; i < m; ++i) {
            for (int j = 0; j < n; ++j) {
                int s = 0, cnt = 0;
                for (int x = i - 1; x <= i + 1; ++x) {
                    for (int y = j - 1; y <= j + 1; ++y) {
                        if (x < 0 || x >= m || y < 0 || y >= n) {
                            continue;
                        }
                        ++cnt;
                        s += img[x][y];
                    }
                }
                ans[i][j] = s / cnt;
            }
        }
        return ans;
    }
};
```

* [sol1-Go]

```go
func imageSmoother(img [][]int) [][]int {
	m, n := len(img), len(img[0])
	ans := make([][]int, m)
	for i, row := range img {
		ans[i] = make([]int, n)
		for j := range row {
			s, cnt := 0, 0
			for x := i - 1; x <= i+1; x++ {
				for y := j - 1; y <= j+1; y++ {
					if x >= 0 && x < m && y >= 0 && y < n {
						cnt++
						s += img[x][y]
					}
				}
			}
			ans[i][j] = s / cnt
		}
	}
	return ans
}
```

* [sol1-TypeScript]

```ts
function imageSmoother(img: number[][]): number[][] {
    const m = img.length;
    const n = img[0].length;
    const ans: number[][] = Array.from({ length: m }, () => Array(n).fill(0));
    for (let i = 0; i < m; ++i) {
        for (let j = 0; j < n; ++j) {
            let s = 0;
            let cnt = 0;
            for (let x = i - 1; x <= i + 1; ++x) {
                for (let y = j - 1; y <= j + 1; ++y) {
                    if (x >= 0 && x < m && y >= 0 && y < n) {
                        ++cnt;
                        s += img[x][y];
                    }
                }
            }
            ans[i][j] = Math.floor(s / cnt);
        }
    }
    return ans;
}
```

* [sol1-Rust]

```rust
impl Solution {
    pub fn image_smoother(img: Vec<Vec<i32>>) -> Vec<Vec<i32>> {
        let m = img.len();
        let n = img[0].len();
        let mut ans = vec![vec![0; n]; m];
        for i in 0..m {
            for j in 0..n {
                let mut s = 0;
                let mut cnt = 0;
                for x in i.saturating_sub(1)..=(i + 1).min(m - 1) {
                    for y in j.saturating_sub(1)..=(j + 1).min(n - 1) {
                        s += img[x][y];
                        cnt += 1;
                    }
                }
                ans[i][j] = s / cnt;
            }
        }
        ans
    }
}
```

æ—¶é—´å¤æ‚åº¦ $O(m \times n)$ï¼Œå…¶ä¸­ $m$ å’Œ $n$ åˆ†åˆ«æ˜¯ $\textit{img}$ çš„è¡Œæ•°å’Œåˆ—æ•°ã€‚å¿½ç•¥ç­”æ¡ˆæ•°ç»„çš„ç©ºé—´æ¶ˆè€—ï¼Œç©ºé—´å¤æ‚åº¦ $O(1)$ã€‚

---

æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºåŒºäº¤æµï¼Œæ¬¢è¿è¯„è®ºåŒºæä¾›å…¶å®ƒè§£é¢˜æ€è·¯ï¼ˆä»£ç ï¼‰ï¼Œä¹Ÿå¯ä»¥ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ä½œè€…å“ˆğŸ˜„~
